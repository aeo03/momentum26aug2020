<h3><strong>Logged in as User: </strong><%= User.find(session[:user_id]).username %></h3>
<p><%= link_to "Logout", logout_user_path(), class: "btn btn-primary", method: :delete %></p>
<h1>Users Listing</h1>

<table>
    <thead>
        <tr>
            <th>User</th>
            <th>Email</th>
            <th>Action</th>
        </tr>
    </thead>

    <tbody>
        <% @users.each do |user| %>
            <tr>
                <td><%= user.username %></td>
                <td><%= user.email %></td>
                <td><%= link_to "Show", user_path(user) %></td>
                <% if User.find(session[:user_id]).username == user.username || current_user.admin? %>
                    <td><%= link_to "Edit", edit_user_path(user) %></td>
                    <td><%= link_to "Delete", user_path(user), method: :delete, data: { confirm: "Are you sure you want to delete this?"} %></td>
                <% end %>
            </tr>
        <% end %>
    </tbody>
</table>

